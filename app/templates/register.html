{% extends 'base.html' %}

{% block content %}
<div class="container w-50">
    <form action="" method="POST">
        {{form.hidden_tag()}}
        <fieldset class="form-group">
            <div class="container w-50">
                {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                {% for category, message in messages %}
                <div class="alert alert-{{category}}">
                    {{ message }}
                    <span class="closebtn" onclick="this.parentElement.style.display='none';">×</span>
                </div>
                {% endfor %}
                {% endif %}
                {% endwith %}
            </div>
            <div class="form-group">
                {{ form.username.label(class='form-control-label') }}
                {% if form.username.errors %}
                {{form.username(class='form-control form-control-lg is-invalid')}}
                {% for error in form.username.errors %}
                <div class='alert alert-danger py-1 px-5 m-1'>
                    {{error}}
                    <span class="closebtn" onclick="this.parentElement.style.display='none';">×</span>
                </div>
                {% endfor %}
                {% else %}
                {{ form.username(class='form-control form-control-lg')}}
                {% endif %}
            </div>
            <div class="form-group">
                {{ form.password.label(class='form-control-label') }}
                {% if form.password.errors %}
                {{form.password(class='form-control form-control-lg is-invalid')}}
                {% for error in form.password.errors %}
                <div class='alert alert-danger py-1 px-5 m-1'>
                    {{error}}
                    <span class="closebtn" onclick="this.parentElement.style.display='none';">×</span>
                </div>
                {% endfor %}
                {% else %}
                {{ form.password(class='form-control form-control-lg')}}
                {% endif %}
            </div>
            <div class="form-group">
                {{ form.confirm_password.label(class='form-control-label') }}
                {% if form.confirm_password.errors %}
                {{form.confirm_password(class='form-control form-control-lg is-invalid')}}
                {% for error in form.confirm_password.errors %}
                <div class='alert alert-danger py-1 px-5 m-1'>
                    {{error}}
                    <span class="closebtn" onclick="this.parentElement.style.display='none';">×</span>
                </div>
                {% endfor %}
                {% else %}
                {{ form.confirm_password(class='form-control form-control-lg')}}
                {% endif %}
            </div>
            <div class="form-group">
                {{ form.email.label(class='form-control-label') }}
                {% if form.email.errors %}
                {{form.email(class='form-control form-control-lg is-invalid')}}
                {% for error in form.email.errors %}
                <div class='alert alert-danger py-1 px-5 m-1'>
                    {{error}}
                    <span class="closebtn" onclick="this.parentElement.style.display='none';">×</span>
                </div>
                {% endfor %}
                {% else %}
                {{ form.email(class='form-control form-control-lg')}}
                {% endif %}
            </div>
        </fieldset>
        <div class="field-group mt-4">
            {{form.submit(class='btn btn-primary')}}
            <span style="padding: 0px 20px;">&nbsp;</span>
            <a class="btn btn-info" href={{url_for('.login_form')}}>Уже есть аккаунт?</a>
        </div>
    </form>
</div>
{{super()}}
{% endblock %}